**Лабораторна робота №5: Симетричне та асиметричне шифрування даних на основі засобів криптографічного пакету OpenSSL**

**Мета:** Ознайомитися з симетричним і асиметричним шифруванням за допомогою OpenSSL та розробити додаток на C/C++ для виконання шифрування та дешифрування даних.

**Теоретичні відомості**

OpenSSL — це потужний криптографічний інструмент, що дозволяє генерувати ключі, шифрувати дані, створювати електронні підписи тощо. У даній роботі розглядаються алгоритми симетричного шифрування (AES) та асиметричного шифрування (RSA).

**Алгоритм AES** (Advanced Encryption Standard) є блоковим симетричним шифром. У даній лабораторній використовується AES-128/192/256 у режимах CBC (Cipher Block Chaining) та CFB (Cipher Feedback), що дозволяє підвищити безпеку даних шляхом використання псевдовипадково згенерованих ключів та векторів ініціалізації.

**Алгоритм RSA** використовується для генерування ключової пари: відкритий та закритий ключі. Ці ключі зберігаються у форматі PEM і використовуються для шифрування сеансових ключів AES, що забезпечує безпечний обмін ключами між сторонами.

**Опис реалізації**

Було розроблено консольний додаток на C з використанням бібліотек OpenSSL. Додаток включає наступні функції:

- **Шифрування та дешифрування файлу** за допомогою AES. Користувач обирає режим (CBC або CFB) та ключ, який генерується псевдовипадково або імпортується.
- **Генерація ключової пари RSA** (2048 біт), збереження ключів у файлах формату PEM.
- **Шифрування сеансового ключа AES** за допомогою відкритого ключа RSA та дешифрування його з використанням закритого ключа для відновлення файлу.

**Як працює програма**

1. **Вибір режиму роботи**: При запуску програма запитує користувача, який режим шифрування використовувати — AES (CBC або CFB) чи RSA для шифрування сеансового ключа.
2. **Генерація ключів**: Програма генерує сеансовий ключ AES та вектор ініціалізації, а також ключову пару RSA для асиметричного шифрування. Користувач може обрати згенерувати ключ автоматично або імпортувати свій.
3. **Шифрування файлу**: Вибраний користувачем файл шифрується за допомогою алгоритму AES, а сгенерований сеансовий ключ шифрується за допомогою RSA для безпечного збереження та передачі.
4. **Дешифрування**: Для відновлення файлу використовується закритий ключ RSA для дешифрування сеансового ключа AES, після чого сам файл дешифрується.
5. **Збереження результатів**: Зашифровані та дешифровані файли зберігаються у вказаному користувачем місці, а ключі — у PEM-файлах для подальшого використання.

**Як збирати і виконувати програму**

1. **Збірка програми**:
   - Встановіть OpenSSL. Для цього виконайте команду: `sudo apt-get install libssl-dev` (для Ubuntu) або використайте інші відповідні засоби для вашої операційної системи.
   - Використайте Makefile, що входить до проекту. У терміналі перейдіть до директорії з проектом і виконайте команду: `make`. Це автоматично згенерує виконуваний файл.
   - Makefile містить наступні основні команди:
     - `make all` — збирає всі необхідні файли для створення виконуваного файлу.
     - `make clean` — видаляє всі об'єктні файли та виконувані файли, що були створені під час збірки.
     - `make test` — запускає тестування програми з використанням тестових файлів для перевірки правильності роботи алгоритмів шифрування та дешифрування.

2. **Запуск програми**:
   - Після успішної збірки виконуваний файл можна запустити командою: `./crypto_app` (назва файлу залежить від Makefile).
   - Під час запуску програма запитує користувача про режим роботи, файл для шифрування/дешифрування та інші необхідні параметри.

**Запуск тестів**

1. **Тестування шифрування та дешифрування**:
   - Використайте тестовий файл `test_input.txt` для перевірки роботи програми. Файл містить текст "This is a test file for encryption and decryption."
   - Запустіть програму і виберіть шифрування файлу з використанням AES, а потім зашифруйте сеансовий ключ RSA.
   - Після шифрування перевірте файл шифрованого тексту, а потім виконайте дешифрування, щоб пересвідчитися в правильності роботи програми.
   - Порівняйте вхідні та вихідні файли, щоб упевнитися, що вони ідентичні.
   - Ви також можете використовувати команду `make test` для автоматичного запуску тестів, які перевіряють роботу всіх основних функцій програми.

**Результати тестування**

Був проведений тест на шифрування та дешифрування файлу `test_input.txt`, який містить текст "This is a test file for encryption and decryption." Тест підтвердив правильність роботи як симетричного, так і асиметричного шифрування. Файл успішно шифрувався, і при дешифруванні текст відновлювався у початковому вигляді.

**Висновки**

Під час виконання лабораторної роботи вдалося ознайомитися з бібліотекою OpenSSL та її можливостями щодо симетричного і асиметричного шифрування. Реалізація алгоритмів AES та RSA у додатку на C показала, що вони можуть використовуватися для забезпечення безпеки даних у сучасних системах.
